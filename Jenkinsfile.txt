node{
def server = Artifactory.server 'jfrog'
def rtMaven = Artifactory.newMavenbuild[]

stage 'Build'
git url: 'https://github.com/prasha94/buildm.git'

stage 'artifactory configuration'
rtmaventool = 'maven'
rtmaven.deployer releaseRepo:'libs-release-local', snapshotRepo:'libs-snapshot-local', server: server
rtmaven.resolver releaseRepo:'libs-release', snapshotRepo:'libs-snapshot', server: server
def buildinfo = Artifactory.newBuildInfo[]
buildinfo.env.capture = true

stage 'execute maven'
  rtMaven.run pom: 'pom.xml', goals: 'clean install', buildInfo: buildInfo

stage 'publish build info'
  server.publishBuildInfo buildinfo
}
